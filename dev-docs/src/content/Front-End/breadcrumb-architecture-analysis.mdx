# Breadcrumb Architecture Analysis

## ê°œìš”

í˜„ì¬ í”„ë¡œì íŠ¸ì˜ breadcrumb ì‹œìŠ¤í…œì€ ì»¤ìŠ¤í…€ í›…ê³¼ Zustandë¥¼ í™œìš©í•œ ê³„ì¸µí™” ì•„í‚¤í…ì²˜ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. UI ì»´í¬ë„ŒíŠ¸, ìƒíƒœ ê´€ë¦¬, ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì˜ ê´€ì‹¬ì‚¬ë¥¼ ëª…í™•íˆ ë¶„ë¦¬í•œ êµ¬ì¡°ì…ë‹ˆë‹¤.

## ì•„í‚¤í…ì²˜ êµ¬ì„±

### 1. ìƒíƒœ ê´€ë¦¬ ë ˆì´ì–´ (Zustand Store)
**íŒŒì¼**: `apps/workspace/src/stores/breadcrumb-store.ts`

```typescript
interface State {
  route: string;
}

interface Action {
  setRoute: (route: string) => void;
  clearRoute: () => void;
}
```

**íŠ¹ì§•**:
- ìµœì†Œí•œì˜ APIë¡œ ê°„ë‹¨í•œ ìƒíƒœ ê´€ë¦¬
- TypeScript íƒ€ì… ì•ˆì •ì„± ë³´ì¥
- Redux ëŒ€ë¹„ ì ì€ ë³´ì¼ëŸ¬í”Œë ˆì´íŠ¸

### 2. ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ë ˆì´ì–´ (Custom Hook)
**íŒŒì¼**: `apps/workspace/src/hooks/use-breadcrumb-items.tsx`

```typescript
export function useBreadcrumbItems(): BreadcrumbItem[] {
  const { pathname } = useLocation();
  const { route } = useBreadcrumbStore();
  
  // ê²½ë¡œ ê¸°ë°˜ breadcrumb ì•„ì´í…œ ìƒì„± ë¡œì§
}
```

**ì—­í• **:
- React Routerì™€ ì—°ë™í•œ ê²½ë¡œ ì¸ì‹
- ë™ì  breadcrumb ì•„ì´í…œ ìƒì„±
- Zustand ìŠ¤í† ì–´ì™€ ì—°ê²°

### 3. UI ì»´í¬ë„ŒíŠ¸ ë ˆì´ì–´
**íŒŒì¼**: `packages/ui/src/components/ui/breadcrumb.tsx`

- ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì»´í¬ë„ŒíŠ¸ ì§‘í•©
- ì ‘ê·¼ì„± ê³ ë ¤ (ARIA ì†ì„±)
- Radix UI Slotì„ í™œìš©í•œ polymorphic ì»´í¬ë„ŒíŠ¸

### 4. í†µí•© ë ˆì´ì–´
**íŒŒì¼**: `apps/workspace/src/components/common/workspace-breadcrumb.tsx`

- ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ê³¼ UI ì»´í¬ë„ŒíŠ¸ ì—°ê²°
- ë„¤ë¹„ê²Œì´ì…˜ ì´ë²¤íŠ¸ ì²˜ë¦¬

## ì¥ì  ë¶„ì„

### ğŸŸ¢ ê´€ì‹¬ì‚¬ ë¶„ë¦¬ (Separation of Concerns)
- **ìƒíƒœ ê´€ë¦¬**: Zustandë¡œ ì¤‘ì•™í™”ëœ ìƒíƒœ
- **ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§**: ì»¤ìŠ¤í…€ í›…ìœ¼ë¡œ ìº¡ìŠí™”
- **UI ë¡œì§**: ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì»´í¬ë„ŒíŠ¸
- **í†µí•© ë¡œì§**: ë³„ë„ ì»´í¬ë„ŒíŠ¸ë¡œ ë¶„ë¦¬

### ğŸŸ¢ íƒ€ì… ì•ˆì •ì„±
```typescript
export interface BreadcrumbItem {
  label: string;
  url?: string;
  isCurrentPage?: boolean;
}
```
ì „ì²´ ì‹œìŠ¤í…œì—ì„œ ê°•ë ¥í•œ TypeScript ì§€ì›

### ğŸŸ¢ ì„±ëŠ¥ ìµœì í™”
- Zustandì˜ ì„ íƒì  êµ¬ë…ìœ¼ë¡œ ë¶ˆí•„ìš”í•œ ë¦¬ë Œë”ë§ ë°©ì§€
- ê°€ë²¼ìš´ ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš©

### ğŸŸ¢ í…ŒìŠ¤íŠ¸ ìš©ì´ì„±
ê° ë ˆì´ì–´ê°€ ë…ë¦½ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥

## ë‹¨ì  ë¶„ì„

### ğŸ”´ í™•ì¥ì„± ë¬¸ì œ
```typescript
if (pathSegments.includes('docs')) {
  return [...baseItems, { label: 'docs', isCurrentPage: true }];
}

if (pathSegments.includes('write')) {
  const items: BreadcrumbItem[] = [...baseItems, { label: 'write', url: '/write' }];
  // í•˜ë“œì½”ë”©ëœ ì¡°ê±´ë¶€ ë¡œì§
}
```
- ìƒˆë¡œìš´ ë¼ìš°íŠ¸ ì¶”ê°€ ì‹œ ì½”ë“œ ìˆ˜ì • í•„ìš”
- ë³µì¡í•œ ì¡°ê±´ë¶€ ë¡œì§ìœ¼ë¡œ ìœ ì§€ë³´ìˆ˜ ì–´ë ¤ì›€

### ğŸ”´ ìƒíƒœ ê´€ë¦¬ í•œê³„
```typescript
export const useBreadcrumbStore = create<State & Action>((set) => ({
  route: '',
  setRoute: (route: string) => { set({ route }); },
  clearRoute: () => set({ route: '' }),
}));
```

**ë¬¸ì œì **:
- ë‹¨ì¼ `route` ë¬¸ìì—´ë§Œ ì €ì¥ (í™•ì¥ì„± ì œí•œ)
- í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ ì‹œ ìƒíƒœ ì†ì‹¤
- ì…ë ¥ ê°’ ê²€ì¦ ì—†ìŒ
- `clearRoute()` í˜¸ì¶œí•˜ëŠ” ê³³ì´ ì—†ì–´ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ê°€ëŠ¥ì„±

### ğŸ”´ ì»´í¬ë„ŒíŠ¸ ì˜¤ìš©
```typescript
// ì˜ëª»ëœ ì‚¬ìš© - í´ë¦­ ê°€ëŠ¥í•œ ì•„ì´í…œì— BreadcrumbPage ì‚¬ìš©
<BreadcrumbPage
  onClick={() => handleNavigate(item.url!)}
  className='cursor-pointer text-muted-foreground hover:text-foreground'
>
  {item.label}
</BreadcrumbPage>
```

**ì˜¬ë°”ë¥¸ ì‚¬ìš©**:
```typescript
<BreadcrumbLink asChild>
  <button onClick={() => handleNavigate(item.url!)}>
    {item.label}
  </button>
</BreadcrumbLink>
```

## í˜„ì¬ êµ¬í˜„ì˜ ì£¼ìš” ì´ìŠˆ

### 1. ìƒíƒœ ë¶ˆì¼ì¹˜
- docs-table-itemì—ì„œ í´ë¦­í•  ë•Œë§Œ `setRoute()` í˜¸ì¶œ
- ì§ì ‘ URL ì ‘ê·¼ ì‹œ breadcrumb ì •ë³´ ëˆ„ë½
- ë„¤ë¹„ê²Œì´ì…˜ ì‹œ ìƒíƒœ ì •ë¦¬ ë¡œì§ ì—†ìŒ

### 2. ì ‘ê·¼ì„± ë¬¸ì œ
- `BreadcrumbPage`ëŠ” `aria-disabled='true'` ì†ì„±ì„ ê°€ì§
- í´ë¦­ ê°€ëŠ¥í•œ ì•„ì´í…œì— ì‚¬ìš© ì‹œ ìŠ¤í¬ë¦° ë¦¬ë” í˜¼ë€

### 3. íƒ€ì… ì•ˆì „ì„±
```typescript
onClick={() => handleNavigate(item.url!)}  // Non-null assertion ì‚¬ìš©
```

## ê°œì„  ë°©ì•ˆ

### ì¦‰ì‹œ ìˆ˜ì • ì‚¬í•­
1. **ì»´í¬ë„ŒíŠ¸ ì˜¬ë°”ë¥¸ ì‚¬ìš©**: `BreadcrumbLink` í™œìš©
2. **ìƒíƒœ ì •ë¦¬ ë¡œì§ ì¶”ê°€**: ì ì ˆí•œ ì‹œì ì— `clearRoute()` í˜¸ì¶œ
3. **íƒ€ì… ì•ˆì „ì„± ê°œì„ **: Non-null assertion ì œê±°

### ì•„í‚¤í…ì²˜ ê°œì„ 
#### 1. ì„¤ì • ê¸°ë°˜ ì ‘ê·¼ë²•
```typescript
interface BreadcrumbConfig {
  path: string;
  label: string | ((params: any) => string);
  parent?: string;
}

const breadcrumbConfig: BreadcrumbConfig[] = [
  { path: '/docs', label: 'docs', parent: 'workspace' },
  { path: '/write/:id', label: (params) => params.title, parent: 'write' }
];
```

#### 2. ë¼ìš°íŠ¸ ë©”íƒ€ë°ì´í„° í†µí•©
```typescript
const routes = [
  {
    path: '/write/:id',
    element: <WriteComponent />,
    breadcrumb: (params) => params.title
  }
];
```

#### 3. ìƒíƒœ ì§€ì†ì„±
- localStorage ë˜ëŠ” URL ê¸°ë°˜ ìƒíƒœ ìœ ì§€
- í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ ì‹œì—ë„ breadcrumb ì •ë³´ ë³´ì¡´

## ëŒ€ì•ˆ ì•„í‚¤í…ì²˜

### Context API ê¸°ë°˜
```typescript
const BreadcrumbContext = createContext<{
  items: BreadcrumbItem[];
  setRoute: (route: string) => void;
  clearRoute: () => void;
}>();
```

**ì¥ì **: React ìƒíƒœê³„ì™€ ë” ìì—°ìŠ¤ëŸ¬ìš´ í†µí•©
**ë‹¨ì **: ì„±ëŠ¥ìƒ Zustandë³´ë‹¤ ë¶ˆë¦¬í•  ìˆ˜ ìˆìŒ

### React Router í†µí•©
```typescript
// react-router-dom v6.4+ì˜ loader í™œìš©
export const writeDetailLoader = ({ params }) => {
  return {
    breadcrumb: params.title
  };
};
```

## ê²°ë¡ 

í˜„ì¬ breadcrumb ì•„í‚¤í…ì²˜ëŠ”:

### âœ… ê°•ì 
- ëª…í™•í•œ ê´€ì‹¬ì‚¬ ë¶„ë¦¬
- í˜„ëŒ€ì ì¸ React íŒ¨í„´ í™œìš©
- ì¢‹ì€ íƒ€ì… ì•ˆì „ì„± ê¸°ë°˜

### âŒ ê°œì„  í•„ìš”ì‚¬í•­
- í™•ì¥ì„± ë¶€ì¡± (í•˜ë“œì½”ë”©ëœ ë¡œì§)
- ìƒíƒœ ê´€ë¦¬ ë¶ˆì™„ì „ì„±
- ì»´í¬ë„ŒíŠ¸ API ì˜¤ìš©

### ğŸ¯ ê¶Œì¥ì‚¬í•­
1. **ë‹¨ê¸°**: ì»´í¬ë„ŒíŠ¸ ì˜¬ë°”ë¥¸ ì‚¬ìš©, ìƒíƒœ ì •ë¦¬ ë¡œì§ ì¶”ê°€
2. **ì¤‘ê¸°**: ì„¤ì • ê¸°ë°˜ breadcrumb ì‹œìŠ¤í…œìœ¼ë¡œ ë¦¬íŒ©í† ë§
3. **ì¥ê¸°**: React Routerì™€ì˜ ë” ê¹Šì€ í†µí•© ê³ ë ¤

ì´ ì•„í‚¤í…ì²˜ëŠ” ì¢‹ì€ ê¸°ì´ˆë¥¼ ì œê³µí•˜ì§€ë§Œ, ìœ ì§€ë³´ìˆ˜ì„±ê³¼ í™•ì¥ì„±ì„ ìœ„í•´ ì„¤ì • ê¸°ë°˜ ì ‘ê·¼ë²•ìœ¼ë¡œì˜ ì „í™˜ì„ ê³ ë ¤í•´ë³¼ í•„ìš”ê°€ ìˆìŠµë‹ˆë‹¤.