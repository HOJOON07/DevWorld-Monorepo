# Shell Router: MFA í™˜ê²½ì˜ í†µí•© ë¼ìš°íŒ… ì‹œìŠ¤í…œ

## ê°œìš”

MFA(Micro Frontend Architecture) í™˜ê²½ì—ì„œ ì—¬ëŸ¬ ë…ë¦½ì ì¸ ì•± ê°„ì˜ ë¼ìš°íŒ…ì„ ë™ê¸°í™”í•˜ê³  ê´€ë¦¬í•˜ê¸° ìœ„í•œ Shell Router ì‹œìŠ¤í…œì„ ë¶„ì„í•©ë‹ˆë‹¤. ì´ë²¤íŠ¸ ê¸°ë°˜ í†µì‹ ê³¼ Module Federationì„ í™œìš©í•œ í™•ì¥ ê°€ëŠ¥í•œ ë¼ìš°íŒ… ì†”ë£¨ì…˜ì…ë‹ˆë‹¤.

## Shell Router ì•„í‚¤í…ì²˜

### 1. ì „ì²´ ì‹œìŠ¤í…œ êµ¬ì¡°

```typescript
// MFA ë¼ìš°íŒ… ì•„í‚¤í…ì²˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             Shell App (Host)            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚        Browser Router               â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â”‚  â”‚   /auth/*   â”‚  â”‚   /feed/*   â”‚   â”‚ â”‚
â”‚  â”‚  â”‚             â”‚  â”‚             â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  Memory     â”‚  â”‚  Memory     â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  Router     â”‚  â”‚  Router     â”‚   â”‚ â”‚
â”‚  â”‚  â”‚             â”‚  â”‚             â”‚   â”‚ â”‚
â”‚  â”‚  â”‚ Auth MFE    â”‚  â”‚ Feed MFE    â”‚   â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚
â”‚  Event Bus: [app-shell] â†” [app-*]      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. íŒ¨í‚¤ì§€ êµ¬ì¡°

```typescript
// @devworld/shell-router íŒ¨í‚¤ì§€ êµ¬ì¡°
packages/shell-router/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”œâ”€â”€ use-app-event.ts      // ë§ˆì´í¬ë¡œ ì•±ìš© ì´ë²¤íŠ¸ í›…
â”‚   â”‚   â””â”€â”€ use-shell-event.ts    // Shell ì•±ìš© ì´ë²¤íŠ¸ í›…
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â””â”€â”€ AppRoutingManager.tsx // ë¼ìš°íŒ… ê´€ë¦¬ ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ router.ts                 // ë¼ìš°í„° ìƒì„± íŒ©í† ë¦¬
â”‚   â””â”€â”€ injector.tsx             // ë§ˆì´í¬ë¡œ ì•± ì£¼ì… ì‹œìŠ¤í…œ
```

## í•µì‹¬ êµ¬ì„± ìš”ì†Œ ë¶„ì„

### 1. useAppEvent í›… (ë§ˆì´í¬ë¡œ ì•±ìš©)

#### êµ¬í˜„ ë¶„ì„
```typescript
// ë§ˆì´í¬ë¡œ ì•±ì—ì„œ ì‚¬ìš©í•˜ëŠ” ì´ë²¤íŠ¸ í›…
export default function useAppEvent(type: string) {
  const navigate = useNavigate();
  const location = useLocation();

  useEffect(() => {
    // âœ… Shellì—ì„œ ë°œì†¡í•˜ëŠ” ë„¤ë¹„ê²Œì´ì…˜ ì´ë²¤íŠ¸ ìˆ˜ì‹ 
    const handleShellNavigation = (event: CustomEvent) => {
      const { pathname } = event.detail;
      navigate(pathname);
    };

    // Shell ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡
    window.addEventListener('[app-shell] navigated', handleShellNavigation);

    return () => {
      window.removeEventListener('[app-shell] navigated', handleShellNavigation);
    };
  }, [navigate]);

  useEffect(() => {
    // âœ… ë§ˆì´í¬ë¡œ ì•±ì˜ ê²½ë¡œ ë³€ê²½ì„ Shellì— ì•Œë¦¼
    const event = new CustomEvent(`[${type}] navigated`, {
      detail: {
        pathname: location.pathname,
        search: location.search,
        hash: location.hash,
      }
    });
    
    window.dispatchEvent(event);
  }, [location, type]);
}
```

#### ì£¼ìš” ê¸°ëŠ¥
- **ì–‘ë°©í–¥ í†µì‹ **: Shell â†” ë§ˆì´í¬ë¡œ ì•± ë¼ìš°íŒ… ìƒíƒœ ë™ê¸°í™”
- **ìë™ ë„¤ë¹„ê²Œì´ì…˜**: Shell ê²½ë¡œ ë³€ê²½ ì‹œ ìë™ìœ¼ë¡œ í•´ë‹¹ ê²½ë¡œë¡œ ì´ë™
- **ìƒíƒœ ì „íŒŒ**: ë§ˆì´í¬ë¡œ ì•± ë‚´ ë„¤ë¹„ê²Œì´ì…˜ì„ Shellì— ì•Œë¦¼

### 2. useShellEvent í›… (Shell ì•±ìš©)

#### êµ¬í˜„ ë¶„ì„
```typescript
// Shell ì•±ì—ì„œ ì‚¬ìš©í•˜ëŠ” ì´ë²¤íŠ¸ í›…
export default function useShellEvent(type: string, basename: string) {
  const navigate = useNavigate();
  const location = useLocation();

  useEffect(() => {
    // âœ… ë§ˆì´í¬ë¡œ ì•±ì˜ ë„¤ë¹„ê²Œì´ì…˜ ì´ë²¤íŠ¸ ìˆ˜ì‹ 
    const handleAppNavigation = (event: CustomEvent) => {
      const { pathname, search, hash } = event.detail;
      
      // basenameì„ í¬í•¨í•œ ì „ì²´ ê²½ë¡œë¡œ ë³€í™˜
      const fullPath = `${basename}${pathname}${search}${hash}`;
      navigate(fullPath);
    };

    // ë§ˆì´í¬ë¡œ ì•± ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡
    window.addEventListener(`[${type}] navigated`, handleAppNavigation);

    return () => {
      window.removeEventListener(`[${type}] navigated`, handleAppNavigation);
    };
  }, [navigate, type, basename]);

  useEffect(() => {
    // âœ… Shellì˜ ê²½ë¡œ ë³€ê²½ì„ ë§ˆì´í¬ë¡œ ì•±ì— ì „íŒŒ
    if (location.pathname.startsWith(basename)) {
      const relativePath = location.pathname.replace(basename, '') || '/';
      
      const event = new CustomEvent('[app-shell] navigated', {
        detail: {
          pathname: relativePath,
          search: location.search,
          hash: location.hash,
        }
      });
      
      window.dispatchEvent(event);
    }
  }, [location, basename]);
}
```

#### ì£¼ìš” ê¸°ëŠ¥
- **ê²½ë¡œ ë³€í™˜**: ìƒëŒ€ ê²½ë¡œ â†” ì ˆëŒ€ ê²½ë¡œ ë³€í™˜
- **basename ê´€ë¦¬**: ê° ë§ˆì´í¬ë¡œ ì•±ì˜ ê³ ìœ  ê²½ë¡œ prefix ì²˜ë¦¬
- **ì¤‘ì•™ ì§‘ì¤‘ì‹ ê´€ë¦¬**: ëª¨ë“  ë§ˆì´í¬ë¡œ ì•±ì˜ ë¼ìš°íŒ… ìƒíƒœ í†µí•© ê´€ë¦¬

### 3. AppRoutingManager ì»´í¬ë„ŒíŠ¸

#### êµ¬í˜„ ë¶„ì„
```typescript
// ë§ˆì´í¬ë¡œ ì•±ì˜ ë¼ìš°íŒ… ê´€ë¦¬ì
interface AppRoutingManagerProps {
  type: string; // ë§ˆì´í¬ë¡œ ì•± ì‹ë³„ì
}

const AppRoutingManager: React.FC<AppRoutingManagerProps> = ({ type }) => {
  // âœ… ìë™ìœ¼ë¡œ useAppEvent í›… ì ìš©
  useAppEvent(type);

  // React Routerì˜ Outlet ì»´í¬ë„ŒíŠ¸ ë Œë”ë§
  return <Outlet />;
};
```

#### ì‚¬ìš© ì˜ˆì‹œ
```typescript
// Auth ë§ˆì´í¬ë¡œ ì•±ì˜ ë¼ìš°íŠ¸ ì„¤ì •
export const routes: RouteObject[] = [
  {
    path: '/',
    element: (
      <QueryProvider>
        <AppRoutingManager type='app-auth' />
      </QueryProvider>
    ),
    children: [
      { path: 'signin', element: <SignInPage /> },
      { path: 'signup', element: <SignUpPage /> },
      { path: 'callback/:provider', element: <OAuthCallbackPage /> },
    ],
  },
];
```

### 4. ë¼ìš°í„° ìƒì„± ì‹œìŠ¤í…œ

#### ìœ ì—°í•œ ë¼ìš°í„° íŒ©í† ë¦¬
```typescript
// í™˜ê²½ì— ë”°ë¥¸ ë¼ìš°í„° íƒ€ì… ì„ íƒ
interface CreateRouterProps {
  type?: 'browser' | 'memory';
  routes: RouteObject[];
  basePath?: string;
}

export function createRouter({ 
  type = 'browser', 
  routes, 
  basePath = '/' 
}: CreateRouterProps) {
  switch (type) {
    case 'memory':
      // âœ… ë§ˆì´í¬ë¡œ ì•±: ë©”ëª¨ë¦¬ ë¼ìš°í„° ì‚¬ìš©
      return createMemoryRouter(routes, {
        initialEntries: [basePath],
      });
    
    case 'browser':
    default:
      // âœ… Shell ì•±: ë¸Œë¼ìš°ì € ë¼ìš°í„° ì‚¬ìš©
      return createBrowserRouter(routes);
  }
}
```

### 5. ë§ˆì´í¬ë¡œ ì•± ì£¼ì… ì‹œìŠ¤í…œ

#### ë™ì  ì£¼ì… íŒ©í† ë¦¬
```typescript
// ë§ˆì´í¬ë¡œ ì•±ì„ DOMì— ì£¼ì…í•˜ëŠ” íŒ©í† ë¦¬ í•¨ìˆ˜
interface InjectProps {
  routerType?: 'browser' | 'memory';
  rootElement: HTMLElement;
  basePath?: string;
}

function injectFactory({ routes }: { routes: RouteObject[] }) {
  return ({ routerType = 'memory', rootElement, basePath = '/' }: InjectProps) => {
    // ë¼ìš°í„° ìƒì„±
    const router = createRouter({
      type: routerType,
      routes,
      basePath,
    });

    // React ì•± ë Œë”ë§
    const root = createRoot(rootElement);
    root.render(<RouterProvider router={router} />);

    // âœ… ì–¸ë§ˆìš´íŠ¸ í•¨ìˆ˜ ë°˜í™˜
    return () => {
      root.unmount();
    };
  };
}

// Auth ì•± ì‚¬ìš© ì˜ˆì‹œ
const inject = injectFactory({ routes });
export default inject;
```

## MFA í™˜ê²½ì—ì„œì˜ ì‹¤ì œ ì‚¬ìš©

### 1. Shell ì•±ì—ì„œ ë§ˆì´í¬ë¡œ ì•± ë¡œë”©

#### Auth ì•± ë¡œë”© ì˜ˆì‹œ
```typescript
// Shell ì•±ì˜ Auth ì»´í¬ë„ŒíŠ¸
export default function AppAuth() {
  const location = useLocation();
  const wrapperRef = useRef<HTMLDivElement>(null);
  const unmountRef = useRef<(() => void) | null>(null);

  // âœ… Shell ì´ë²¤íŠ¸ í›… ë“±ë¡
  useShellEvent('app-auth', appAuthBaseName);

  useEffect(() => {
    if (wrapperRef.current) {
      // âœ… Module Federationìœ¼ë¡œ ì›ê²© ëª¨ë“ˆ ë¡œë”©
      importRemote<{ default: injectFunctionType }>({
        url: 'http://localhost:3002',
        scope: 'auth',
        module: 'injector',
      }).then(({ default: inject }) => {
        // âœ… ë§ˆì´í¬ë¡œ ì•± ì£¼ì…
        unmountRef.current = inject({
          routerType: 'memory',
          rootElement: wrapperRef.current!,
          basePath: location.pathname.replace(appAuthBaseName, ''),
        });
      });
    }

    // âœ… ì»´í¬ë„ŒíŠ¸ ì–¸ë§ˆìš´íŠ¸ ì‹œ ì •ë¦¬
    return () => {
      if (unmountRef.current) {
        unmountRef.current();
      }
    };
  }, [location.pathname]);

  return <div ref={wrapperRef} />;
}
```

### 2. ë¼ìš°íŒ… íë¦„ ì‹œë‚˜ë¦¬ì˜¤

#### ì‹œë‚˜ë¦¬ì˜¤ 1: Shellì—ì„œ Auth ì•±ìœ¼ë¡œ ë„¤ë¹„ê²Œì´ì…˜
```typescript
// ì‚¬ìš©ìê°€ /auth/signinìœ¼ë¡œ ì´ë™
1. Shell Router: `/auth/signin` ê²½ë¡œ ê°ì§€
2. useShellEvent: `app-auth` íƒ€ì…ìœ¼ë¡œ ì´ë²¤íŠ¸ ë°œì†¡
   â””â”€ ì´ë²¤íŠ¸ ë°ì´í„°: { pathname: '/signin', search: '', hash: '' }
3. Auth App useAppEvent: ì´ë²¤íŠ¸ ìˆ˜ì‹  í›„ `/signin`ìœ¼ë¡œ ë„¤ë¹„ê²Œì´ì…˜
4. Auth App: SignInPage ì»´í¬ë„ŒíŠ¸ ë Œë”ë§
```

#### ì‹œë‚˜ë¦¬ì˜¤ 2: Auth ì•± ë‚´ë¶€ ë„¤ë¹„ê²Œì´ì…˜
```typescript
// Auth ì•±ì—ì„œ /signin â†’ /signup ì´ë™
1. Auth App Router: `/signup` ê²½ë¡œë¡œ ë„¤ë¹„ê²Œì´ì…˜
2. useAppEvent: Shellì— ê²½ë¡œ ë³€ê²½ ì•Œë¦¼
   â””â”€ ì´ë²¤íŠ¸ ë°ì´í„°: { pathname: '/signup', search: '', hash: '' }
3. Shell useShellEvent: ì´ë²¤íŠ¸ ìˆ˜ì‹  í›„ `/auth/signup`ìœ¼ë¡œ URL ì—…ë°ì´íŠ¸
4. ë¸Œë¼ìš°ì € ì£¼ì†Œì°½: `http://localhost:3000/auth/signup`
```

### 3. ê²½ë¡œ ìƒìˆ˜ ê´€ë¦¬

#### ì¤‘ì•™ì§‘ì¤‘ì‹ ê²½ë¡œ ì„¤ì •
```typescript
// Shell ì•±ì˜ ê²½ë¡œ ìƒìˆ˜
export const appAuthBaseName = '/auth';
export const appFeedBaseName = '/feed';

// ì‚¬ìš© ì˜ˆì‹œ
useShellEvent('app-auth', appAuthBaseName);
useShellEvent('app-feed', appFeedBaseName);
```

## MFA í™˜ê²½ì—ì„œì˜ ì¥ì 

### 1. ë…ë¦½ì„±ê³¼ í†µí•©ì˜ ê· í˜•

#### ë§ˆì´í¬ë¡œ ì•±ì˜ ë…ë¦½ì„±
```typescript
// âœ… ê° ë§ˆì´í¬ë¡œ ì•±ì€ ë…ë¦½ì ì¸ ë¼ìš°íŒ… ì‹œìŠ¤í…œ ë³´ìœ 
// Auth ì•±
const authRoutes = [
  { path: '/signin', element: <SignInPage /> },
  { path: '/signup', element: <SignUpPage /> },
];

// Feed ì•±  
const feedRoutes = [
  { path: '/timeline', element: <TimelinePage /> },
  { path: '/profile', element: <ProfilePage /> },
];
```

#### Shellì˜ í†µí•© ê´€ë¦¬
```typescript
// âœ… Shellì—ì„œ ëª¨ë“  ì•±ì˜ ë¼ìš°íŒ… ìƒíƒœ í†µí•© ê´€ë¦¬
const shellRoutes = [
  { path: '/auth/*', element: <AppAuth /> },
  { path: '/feed/*', element: <AppFeed /> },
];
```

### 2. ê°œë°œ ë° ë°°í¬ íš¨ìœ¨ì„±

#### ë…ë¦½ì  ê°œë°œ
```typescript
// âœ… ê° íŒ€ì´ ë…ë¦½ì ìœ¼ë¡œ ê°œë°œ ê°€ëŠ¥
// Auth íŒ€
npm run dev:auth  // localhost:3002ì—ì„œ ë…ë¦½ ì‹¤í–‰

// Feed íŒ€
npm run dev:feed  // localhost:3003ì—ì„œ ë…ë¦½ ì‹¤í–‰

// Shell íŒ€
npm run dev:shell // localhost:3000ì—ì„œ í†µí•© ì‹¤í–‰
```

#### Hot Reloading ì§€ì›
```typescript
// ê°œë°œ ì¤‘ ë§ˆì´í¬ë¡œ ì•± ë³€ê²½ ì‹œ ìë™ ë¦¬ë¡œë“œ
useEffect(() => {
  if (process.env.NODE_ENV === 'development') {
    // âœ… ê°œë°œ í™˜ê²½ì—ì„œ ëª¨ë“ˆ ì¬ë¡œë”©
    import(/* webpackMode: "eager" */ 'auth/injector').then(({ default: inject }) => {
      // ìƒˆë¡œìš´ ë²„ì „ìœ¼ë¡œ ì¬ì£¼ì…
    });
  }
}, []);
```

### 3. ì‚¬ìš©ì ê²½í—˜ ìµœì í™”

#### ëŠê¹€ ì—†ëŠ” ë„¤ë¹„ê²Œì´ì…˜
```typescript
// âœ… SPAì²˜ëŸ¼ ë¶€ë“œëŸ¬ìš´ ë¼ìš°íŒ…
// ë¸Œë¼ìš°ì € ë’¤ë¡œê°€ê¸°/ì•ìœ¼ë¡œê°€ê¸° ì™„ë²½ ì§€ì›
// ìƒˆë¡œê³ ì¹¨ ì—†ëŠ” ì•± ê°„ ì´ë™
// ë§ˆì´í¬ë¡œ ì•± ê°„ ìƒíƒœ ìœ ì§€
```

#### URL ì¼ê´€ì„±
```typescript
// âœ… ì‚¬ìš©ì ê´€ì ì—ì„œ ë‹¨ì¼ ì•±ì²˜ëŸ¼ ë™ì‘
// /auth/signin    â†’ Auth ì•±ì˜ ë¡œê·¸ì¸ í˜ì´ì§€
// /auth/signup    â†’ Auth ì•±ì˜ íšŒì›ê°€ì… í˜ì´ì§€  
// /feed/timeline  â†’ Feed ì•±ì˜ íƒ€ì„ë¼ì¸ í˜ì´ì§€
// /feed/profile   â†’ Feed ì•±ì˜ í”„ë¡œí•„ í˜ì´ì§€
```

### 4. í™•ì¥ì„±ê³¼ ìœ ì§€ë³´ìˆ˜ì„±

#### ìƒˆë¡œìš´ ë§ˆì´í¬ë¡œ ì•± ì¶”ê°€
```typescript
// âœ… ìƒˆ ì•± ì¶”ê°€ ì‹œ í•„ìš”í•œ ì‘ì—… (ìµœì†Œí•œ)

// 1. Shellì— ìƒˆ ë¼ìš°íŠ¸ ì¶”ê°€
{ path: '/dashboard/*', element: <AppDashboard /> }

// 2. Shell ì´ë²¤íŠ¸ í›… ë“±ë¡
useShellEvent('app-dashboard', '/dashboard');

// 3. ìƒˆ ì•±ì—ì„œ AppRoutingManager ì‚¬ìš©
<AppRoutingManager type='app-dashboard' />

// ê¸°ì¡´ ì•±ë“¤ì—ëŠ” ì˜í–¥ ì—†ìŒ!
```

#### ë…ë¦½ì  ë°°í¬
```typescript
// âœ… ê° ë§ˆì´í¬ë¡œ ì•±ì˜ ë…ë¦½ì  ë°°í¬
const moduleUrls = {
  auth: process.env.AUTH_MODULE_URL || 'http://localhost:3002',
  feed: process.env.FEED_MODULE_URL || 'http://localhost:3003',
  dashboard: process.env.DASHBOARD_MODULE_URL || 'http://localhost:3004',
};
```

## ì„±ëŠ¥ ìµœì í™”

### 1. ì§€ì—° ë¡œë”© (Lazy Loading)
```typescript
// âœ… í•„ìš”í•  ë•Œë§Œ ë§ˆì´í¬ë¡œ ì•± ë¡œë”©
useEffect(() => {
  if (location.pathname.startsWith(appAuthBaseName)) {
    // Auth ì•±ì´ í•„ìš”í•  ë•Œë§Œ ë¡œë”©
    loadAuthApp();
  }
}, [location.pathname]);
```

### 2. ë©”ëª¨ë¦¬ ê´€ë¦¬
```typescript
// âœ… ì•± ì „í™˜ ì‹œ ì´ì „ ì•± ë©”ëª¨ë¦¬ ì •ë¦¬
return () => {
  if (unmountRef.current) {
    unmountRef.current(); // React ì•± ì–¸ë§ˆìš´íŠ¸
    unmountRef.current = null;
  }
};
```

### 3. ê³µìœ  ì˜ì¡´ì„± ìµœì í™”
```typescript
// Module Federation ì„¤ì •
shared: {
  '@devworld/shell-router': {
    singleton: true,        // âœ… ë‹¨ì¼ ì¸ìŠ¤í„´ìŠ¤ ë³´ì¥
    strictVersion: false,   // ë²„ì „ í˜¸í™˜ì„± ìµœì í™”
  },
  'react': { singleton: true },
  'react-dom': { singleton: true },
}
```

## ì—ëŸ¬ ì²˜ë¦¬ ë° ë³µêµ¬

### 1. ë§ˆì´í¬ë¡œ ì•± ë¡œë”© ì‹¤íŒ¨ ì²˜ë¦¬
```typescript
const loadMicroApp = async () => {
  try {
    const { default: inject } = await importRemote({
      url: microAppUrl,
      scope: 'auth',
      module: 'injector',
    });
    
    unmountRef.current = inject(config);
  } catch (error) {
    console.error('ë§ˆì´í¬ë¡œ ì•± ë¡œë”© ì‹¤íŒ¨:', error);
    
    // âœ… í´ë°± UI í‘œì‹œ
    setError('ì•±ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
  }
};
```

### 2. ë¼ìš°íŒ… ë™ê¸°í™” ì˜¤ë¥˜ ë³µêµ¬
```typescript
// âœ… ì´ë²¤íŠ¸ í†µì‹  ì‹¤íŒ¨ ì‹œ ë³µêµ¬ ë¡œì§
useEffect(() => {
  const timeoutId = setTimeout(() => {
    // ì¼ì • ì‹œê°„ í›„ ê°•ì œ ë™ê¸°í™”
    window.dispatchEvent(new CustomEvent('[app-shell] navigated', {
      detail: { pathname: location.pathname }
    }));
  }, 1000);

  return () => clearTimeout(timeoutId);
}, [location.pathname]);
```

## ê°œë°œì ê²½í—˜ (DX) ê°œì„ 

### 1. íƒ€ì… ì•ˆì „ì„±
```typescript
// âœ… TypeScript ì§€ì›ìœ¼ë¡œ ì»´íŒŒì¼ íƒ€ì„ ì•ˆì „ì„±
interface AppEventDetail {
  pathname: string;
  search: string;
  hash: string;
}

interface ShellRouterConfig {
  type: 'app-auth' | 'app-feed' | 'app-dashboard';
  basename: string;
}
```

### 2. ê°œë°œ ë„êµ¬
```typescript
// âœ… ë””ë²„ê¹…ì„ ìœ„í•œ ì´ë²¤íŠ¸ ë¡œê¹…
if (process.env.NODE_ENV === 'development') {
  window.addEventListener('*', (event) => {
    if (event.type.includes('navigated')) {
      console.log(`[Shell Router] ${event.type}:`, event.detail);
    }
  });
}
```

### 3. í•« ë¦¬ë¡œë”© ì§€ì›
```typescript
// âœ… ê°œë°œ ì¤‘ ë§ˆì´í¬ë¡œ ì•± ë³€ê²½ ì‹œ ìë™ ë°˜ì˜
if (module.hot) {
  module.hot.accept('./injector', () => {
    // ë§ˆì´í¬ë¡œ ì•± ì¬ë¡œë”©
    reloadMicroApp();
  });
}
```

## ê²°ë¡ 

Shell RouterëŠ” MFA í™˜ê²½ì—ì„œ ë‹¤ìŒê³¼ ê°™ì€ í•µì‹¬ ê°€ì¹˜ë¥¼ ì œê³µí•©ë‹ˆë‹¤:

### ğŸš€ **ì•„í‚¤í…ì²˜ì  ìš°ìˆ˜ì„±**
- **ë…ë¦½ì„±**: ê° ë§ˆì´í¬ë¡œ ì•±ì˜ ì™„ì „í•œ ììœ¨ì„± ë³´ì¥
- **í†µí•©ì„±**: ì‚¬ìš©ì ê´€ì ì—ì„œ ë‹¨ì¼ ì•± ê²½í—˜ ì œê³µ
- **í™•ì¥ì„±**: ìƒˆë¡œìš´ ì•± ì¶”ê°€ ì‹œ ê¸°ì¡´ ì‹œìŠ¤í…œ ì˜í–¥ ì—†ìŒ

### ğŸ”§ **ê°œë°œ íš¨ìœ¨ì„±**
- **íŒ€ ë…ë¦½ì„±**: ê° íŒ€ì˜ ë…ë¦½ì  ê°œë°œ ë° ë°°í¬
- **ì½”ë“œ ì¬ì‚¬ìš©**: ê³µí†µ ë¼ìš°íŒ… ë¡œì§ì˜ íŒ¨í‚¤ì§€í™”
- **íƒ€ì… ì•ˆì „ì„±**: TypeScript ê¸°ë°˜ ì»´íŒŒì¼ íƒ€ì„ ê²€ì¦

### ğŸ“ˆ **ì„±ëŠ¥ ìµœì í™”**
- **ì§€ì—° ë¡œë”©**: í•„ìš”í•  ë•Œë§Œ ë§ˆì´í¬ë¡œ ì•± ë¡œë”©
- **ë©”ëª¨ë¦¬ ê´€ë¦¬**: ìë™ ì–¸ë§ˆìš´íŠ¸ë¡œ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë°©ì§€
- **ê³µìœ  ìµœì í™”**: ì¤‘ë³µ ì˜ì¡´ì„± ì œê±°

### ğŸ›¡ï¸ **ì•ˆì •ì„±**
- **ì—ëŸ¬ ê²©ë¦¬**: í•œ ì•±ì˜ ì˜¤ë¥˜ê°€ ë‹¤ë¥¸ ì•±ì— ì˜í–¥ ì—†ìŒ
- **ë³µêµ¬ ë§¤ì»¤ë‹ˆì¦˜**: ë¡œë”© ì‹¤íŒ¨ ì‹œ í´ë°± ì²˜ë¦¬
- **ìƒíƒœ ë™ê¸°í™”**: ê°•ê±´í•œ ì´ë²¤íŠ¸ ê¸°ë°˜ í†µì‹ 

ì´ëŸ¬í•œ Shell Router ì‹œìŠ¤í…œì€ ë§ˆì´í¬ë¡œ í”„ë¡ íŠ¸ì—”ë“œ ì•„í‚¤í…ì²˜ì˜ ë³µì¡ì„±ì„ ì¶”ìƒí™”í•˜ë©´ì„œë„, ê° ì•±ì˜ ë…ë¦½ì„±ê³¼ ì „ì²´ ì‹œìŠ¤í…œì˜ ì¼ê´€ì„±ì„ ë™ì‹œì— ë³´ì¥í•˜ëŠ” í˜ì‹ ì ì¸ ì†”ë£¨ì…˜ì…ë‹ˆë‹¤.